# =============================================================================
# IKINCI KANAL - API Configuration
# =============================================================================
# Copy this file to .env and fill in the values

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3050
HOME_SERVER=itinerarytemplate.com
BASE_URL=https://api.itinerarytemplate.com

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://user:password@localhost:5432/ikincikanal?schema=public

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
JWT_SECRET=your-very-long-and-secure-jwt-secret-key-minimum-32-chars
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=30d

# -----------------------------------------------------------------------------
# WebAuthn / Passkey
# -----------------------------------------------------------------------------
WEBAUTHN_RP_NAME=IKINCI KANAL
WEBAUTHN_RP_ID=itinerarytemplate.com
WEBAUTHN_ORIGIN=https://itinerarytemplate.com

# -----------------------------------------------------------------------------
# TURN Server (WebRTC)
# -----------------------------------------------------------------------------
TURN_SECRET=your-turn-server-secret-shared-with-coturn
TURN_SERVERS=turn:turn.itinerarytemplate.com:3478,turns:turn.itinerarytemplate.com:5349

# -----------------------------------------------------------------------------
# Federation (Server-to-Server)
# -----------------------------------------------------------------------------
# IMPORTANT: Generate these keys securely for production!
#
# To generate a new Ed25519 key pair:
#   openssl genpkey -algorithm Ed25519 -out federation-private.pem
#   openssl pkey -in federation-private.pem -pubout -out federation-public.pem
#   cat federation-private.pem | base64 -w 0
#
# FEDERATION_SIGNING_KEY: Base64-encoded Ed25519 private key
# FEDERATION_KEY_ID: Unique identifier for this key (for rotation tracking)
#
# In development, these are optional (ephemeral keys will be generated)
# In production, these are REQUIRED
#
FEDERATION_SIGNING_KEY=
FEDERATION_KEY_ID=key-2024-01

# -----------------------------------------------------------------------------
# Push Notifications
# -----------------------------------------------------------------------------
# Firebase Cloud Messaging (Android)
FCM_PROJECT_ID=
FCM_PRIVATE_KEY=
FCM_CLIENT_EMAIL=

# Apple Push Notification Service (iOS)
APNS_KEY_ID=
APNS_TEAM_ID=
APNS_PRIVATE_KEY=
APNS_BUNDLE_ID=com.ikincikanal.app

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_LOGIN_IP=10
RATE_LIMIT_LOGIN_HANDLE=5
RATE_LIMIT_TURN=10
RATE_LIMIT_RESOLVE_IP=10
RATE_LIMIT_RESOLVE_USER=100

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Argon2 password hashing (defaults are secure, adjust for your server)
ARGON2_MEMORY_COST=65536
ARGON2_TIME_COST=3
ARGON2_PARALLELISM=4

# Account lockout
LOCKOUT_THRESHOLD=5
LOCKOUT_DURATION_MINUTES=15

# -----------------------------------------------------------------------------
# Monitoring (Optional)
# -----------------------------------------------------------------------------
SENTRY_DSN=
LOG_LEVEL=info
